<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Bioinformatics Library for Integrated Tools • blit</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Bioinformatics Library for Integrated Tools">
<meta name="description" content="An all-encompassing R toolkit designed to streamline the process of calling various bioinformatics software and then performing data analysis and visualization in R. With blit, users can easily integrate a wide array of bioinformatics command line tools into their workflows, leveraging the power of R for sophisticated data manipulation and graphical representation.">
<meta property="og:description" content="An all-encompassing R toolkit designed to streamline the process of calling various bioinformatics software and then performing data analysis and visualization in R. With blit, users can easily integrate a wide array of bioinformatics command line tools into their workflows, leveraging the power of R for sophisticated data manipulation and graphical representation.">
<meta property="og:image" content="https://wanglabcsu.github.io/blit/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">blit</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/WangLabCSU/blit/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="blit-bioinformatics-library-for-integrated-tools-">blit: Bioinformatics Library for Integrated Tools <a class="anchor" aria-label="anchor" href="#blit-bioinformatics-library-for-integrated-tools-"></a>
</h1>
</div>
<!-- badges: start -->

<p>The goal of <code>blit</code> is to make it easy to execute command line tool from R.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install <code>blit</code> from <code>CRAN</code> using:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"blit"</span><span class="op">)</span></span></code></pre></div>
<p>Alternatively, install the development version from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"WangLabCSU/blit"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/WangLabCSU/blit" class="external-link">blit</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="execute-command">Execute command<a class="anchor" aria-label="anchor" href="#execute-command"></a>
</h3>
<p>To build a <code>command</code>, simply use <code>exec</code>. The first argument is the command name, and you can also provide the full path. After that, pass the command parameters. This will create a <code>command</code> object:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/exec.html">exec</a></span><span class="op">(</span><span class="st">"echo"</span>, <span class="st">"$PATH"</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;Execute: echo&gt;</span></span></code></pre></div>
<p>To run the command, just pass the <code>command</code> object to the <code><a href="reference/cmd_run.html">cmd_run()</a></code> (Note: <code>stdout = "|"</code> is always used in the vignette to ensure that the standard output can be captured by knitr.)</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>TEST <span class="op">=</span> <span class="st">"blit is awesome"</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/exec.html">exec</a></span><span class="op">(</span><span class="st">"echo"</span>, <span class="st">"$TEST"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="reference/cmd_run.html">cmd_run</a></span><span class="op">(</span>stdout <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Running command (2025-04-08 05:58:19): echo $TEST</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; blit is awesome</span></span>
<span><span class="co">#&gt; Running scheduled exit task</span></span>
<span><span class="co">#&gt; Command process finished</span></span>
<span><span class="co">#&gt; System command succeed</span></span></code></pre></div>
<p>Alternatively, you can run it in the background. In this case, a <a href="https://processx.r-lib.org/index.html" class="external-link"><code>process</code></a> object will be returned. For more information, refer to the official site:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">proc</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/exec.html">exec</a></span><span class="op">(</span><span class="st">"echo"</span>, <span class="st">"$TEST"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="reference/cmd_run.html">cmd_background</a></span><span class="op">(</span>stdout <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span><span class="va">proc</span><span class="op">$</span><span class="fu">kill</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.unsetenv</a></span><span class="op">(</span><span class="st">"TEST"</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p>We use some tricks to capture the output from the background process. The actual implementation in the <code>README.Rmd</code> differs, but the output remains the same.</p>
</blockquote>
<div class="sourceCode" id="cb7"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co">#&gt; Running command (2025-04-08 05:58:19): echo $TEST</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="co">#&gt; blit is awesome</span></span></code></pre></div>
<p><code><a href="reference/cmd_run.html">cmd_background()</a></code> is provided for completeness. Instead of using this function, we recommend using <code><a href="reference/cmd_parallel.html">cmd_parallel()</a></code>, which can run multiple commands in the background while ensuring that all processes are properly cleaned up when the process exits.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ip address are copied from quora &lt;What are some famous IP addresses?&gt;: https://qr.ae/pYlnbQ</span></span>
<span><span class="va">address</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"localhost"</span>, <span class="st">"208.67.222.222"</span>, <span class="st">"8.8.8.8"</span>, <span class="st">"8.8.4.4"</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/cmd_parallel.html">cmd_parallel</a></span><span class="op">(</span></span>
<span>    <span class="op">!</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">address</span>, <span class="kw">function</span><span class="op">(</span><span class="va">ip</span><span class="op">)</span> <span class="fu"><a href="reference/exec.html">exec</a></span><span class="op">(</span><span class="st">"ping"</span>, <span class="va">ip</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    stdouts <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    stdout_callbacks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span>,</span>
<span>        <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/force.html" class="external-link">force</a></span><span class="op">(</span><span class="va">i</span><span class="op">)</span></span>
<span>            <span class="kw">function</span><span class="op">(</span><span class="va">text</span>, <span class="va">proc</span><span class="op">)</span> <span class="op">{</span></span>
<span>                <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"Connection %d: %s"</span>, <span class="va">i</span>, <span class="va">text</span><span class="op">)</span></span>
<span>            <span class="op">}</span></span>
<span>        <span class="op">}</span></span>
<span>    <span class="op">)</span>,</span>
<span>    timeouts <span class="op">=</span> <span class="fl">4</span>, <span class="co"># terminate after 4s</span></span>
<span>    threads <span class="op">=</span> <span class="fl">4</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Running command (2025-04-08 05:58:19): ping localhost</span></span>
<span><span class="co">#&gt; Running command (2025-04-08 05:58:19): ping 208.67.222.222</span></span>
<span><span class="co">#&gt; Running command (2025-04-08 05:58:19): ping 8.8.8.8</span></span>
<span><span class="co">#&gt; Running command (2025-04-08 05:58:19): ping 8.8.4.4</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Connection 1: PING localhost (::1) 56 data bytes</span></span>
<span><span class="co">#&gt; Connection 1: 64 bytes from localhost (::1): icmp_seq=1 ttl=64 time=0.017 ms</span></span>
<span><span class="co">#&gt; ⠙ 0/4 [0/s] [elapsed in 76ms] @ 2025-04-08 05:58:19</span></span>
<span><span class="co">#&gt; ⠹ 0/4 [0/s] [elapsed in 290ms] @ 2025-04-08 05:58:20</span></span>
<span><span class="co">#&gt; ⠸ 0/4 [0/s] [elapsed in 500ms] @ 2025-04-08 05:58:20</span></span>
<span><span class="co">#&gt; ⠼ 0/4 [0/s] [elapsed in 710ms] @ 2025-04-08 05:58:20</span></span>
<span><span class="co">#&gt; ⠴ 0/4 [0/s] [elapsed in 929ms] @ 2025-04-08 05:58:20</span></span>
<span><span class="co">#&gt; ⠦ 0/4 [0/s] [elapsed in 1.1s] @ 2025-04-08 05:58:20</span></span>
<span><span class="co">#&gt; ⠧ 0/4 [0/s] [elapsed in 1.4s] @ 2025-04-08 05:58:21</span></span>
<span><span class="co">#&gt; ⠇ 0/4 [0/s] [elapsed in 1.6s] @ 2025-04-08 05:58:21</span></span>
<span><span class="co">#&gt; Connection 1: 64 bytes from localhost (::1): icmp_seq=2 ttl=64 time=0.042 ms</span></span>
<span><span class="co">#&gt; ⠏ 0/4 [0/s] [elapsed in 1.6s] @ 2025-04-08 05:58:21</span></span>
<span><span class="co">#&gt; ⠋ 0/4 [0/s] [elapsed in 1.8s] @ 2025-04-08 05:58:21</span></span>
<span><span class="co">#&gt; ⠙ 0/4 [0/s] [elapsed in 2s] @ 2025-04-08 05:58:21</span></span>
<span><span class="co">#&gt; ⠹ 0/4 [0/s] [elapsed in 2.2s] @ 2025-04-08 05:58:22</span></span>
<span><span class="co">#&gt; Connection 1: 64 bytes from localhost (::1): icmp_seq=3 ttl=64 time=0.040 ms</span></span>
<span><span class="co">#&gt; ⠸ 0/4 [0/s] [elapsed in 2.2s] @ 2025-04-08 05:58:22</span></span>
<span><span class="co">#&gt; ⠼ 0/4 [0/s] [elapsed in 2.4s] @ 2025-04-08 05:58:22</span></span>
<span><span class="co">#&gt; ⠴ 0/4 [0/s] [elapsed in 2.6s] @ 2025-04-08 05:58:22</span></span>
<span><span class="co">#&gt; ⠦ 0/4 [0/s] [elapsed in 2.8s] @ 2025-04-08 05:58:22</span></span>
<span><span class="co">#&gt; ⠧ 0/4 [0/s] [elapsed in 3s] @ 2025-04-08 05:58:22</span></span>
<span><span class="co">#&gt; ⠇ 0/4 [0/s] [elapsed in 3.3s] @ 2025-04-08 05:58:23</span></span>
<span><span class="co">#&gt; ⠏ 0/4 [0/s] [elapsed in 3.5s] @ 2025-04-08 05:58:23</span></span>
<span><span class="co">#&gt; ⠋ 0/4 [0/s] [elapsed in 3.7s] @ 2025-04-08 05:58:23</span></span>
<span><span class="co">#&gt; Connection 1: 64 bytes from localhost (::1): icmp_seq=4 ttl=64 time=0.039 ms</span></span>
<span><span class="co">#&gt; ⠙ 0/4 [0/s] [elapsed in 3.7s] @ 2025-04-08 05:58:23</span></span>
<span><span class="co">#&gt; ⠹ 0/4 [0/s] [elapsed in 3.9s] @ 2025-04-08 05:58:23</span></span>
<span><span class="co">#&gt; ⠸ 0/4 [0/s] [elapsed in 4.1s] @ 2025-04-08 05:58:23</span></span>
<span><span class="co">#&gt; ⠼ 0/4 [0/s] [elapsed in 4.1s] @ 2025-04-08 05:58:23</span></span>
<span><span class="co">#&gt; Running scheduled exit task</span></span>
<span><span class="co">#&gt; Command process finished</span></span>
<span><span class="co">#&gt; Running scheduled exit task</span></span>
<span><span class="co">#&gt; Command process finished</span></span>
<span><span class="co">#&gt; Running scheduled exit task</span></span>
<span><span class="co">#&gt; Command process finished</span></span>
<span><span class="co">#&gt; Running scheduled exit task</span></span>
<span><span class="co">#&gt; Command process finished</span></span>
<span><span class="co">#&gt; ⠼ 4/4 [0.96/s] [elapsed in 4.2s] @ 2025-04-08 05:58:23</span></span>
<span><span class="co">#&gt; Warning: [Command: 1] System command timed out in 4 secs (status: -9)</span></span>
<span><span class="co">#&gt; Warning: [Command: 2] System command timed out in 4.1 secs (status: -9)</span></span>
<span><span class="co">#&gt; Warning: [Command: 3] System command timed out in 4.1 secs (status: -9)</span></span>
<span><span class="co">#&gt; Warning: [Command: 4] System command timed out in 4.1 secs (status: -9)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="environment-context">Environment context<a class="anchor" aria-label="anchor" href="#environment-context"></a>
</h3>
<p>The <code>blit</code> package provides several functions to manage and control the environment context:</p>
<ul>
<li>
<code>cmd_wd</code>: define the working directory.</li>
<li>
<code>cmd_envvar</code>: define the environment variables.</li>
<li>
<code>cmd_envpath</code>: define the <code>PATH</code>-like environment variables.</li>
<li>
<code>cmd_condaenv</code>: define the <code>PATH</code> environment variables with conda environment.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/exec.html">exec</a></span><span class="op">(</span><span class="st">"echo"</span>, <span class="st">"$(pwd)"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/cmd_wd.html">cmd_wd</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/cmd_run.html">cmd_run</a></span><span class="op">(</span>stdout <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Working Directory: '/tmp/Rtmp2bxDJx'</span></span>
<span><span class="co">#&gt; Running command (2025-04-08 05:58:24): echo $(pwd)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; /tmp/Rtmp2bxDJx</span></span>
<span><span class="co">#&gt; Running scheduled exit task</span></span>
<span><span class="co">#&gt; Command process finished</span></span>
<span><span class="co">#&gt; System command succeed</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/exec.html">exec</a></span><span class="op">(</span><span class="st">"echo"</span>, <span class="st">"$TEST"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/cmd_wd.html">cmd_envvar</a></span><span class="op">(</span>TEST <span class="op">=</span> <span class="st">"blit is very awesome"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/cmd_run.html">cmd_run</a></span><span class="op">(</span>stdout <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Setting environment variables: TEST</span></span>
<span><span class="co">#&gt; Running command (2025-04-08 05:58:24): echo $TEST</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; blit is very awesome</span></span>
<span><span class="co">#&gt; Running scheduled exit task</span></span>
<span><span class="co">#&gt; Command process finished</span></span>
<span><span class="co">#&gt; System command succeed</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/exec.html">exec</a></span><span class="op">(</span><span class="st">"echo"</span>, <span class="st">"$PATH"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/cmd_wd.html">cmd_envpath</a></span><span class="op">(</span><span class="st">"PATH_IS_HERE"</span>, action <span class="op">=</span> <span class="st">"replace"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/cmd_run.html">cmd_run</a></span><span class="op">(</span>stdout <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Setting environment variables: PATH</span></span>
<span><span class="co">#&gt; Running command (2025-04-08 05:58:24): echo $PATH</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; PATH_IS_HERE</span></span>
<span><span class="co">#&gt; Running scheduled exit task</span></span>
<span><span class="co">#&gt; Command process finished</span></span>
<span><span class="co">#&gt; System command succeed</span></span></code></pre></div>
<blockquote>
<p>Note: <code>echo</code> is a built-in command of the linux shell, so it remains available even after modifying the <code>PATH</code> environment variable.</p>
</blockquote>
<p><code><a href="reference/cmd_wd.html">cmd_condaenv()</a></code> can add <code>conda</code>/<code>mamba</code> environment prefix to the <code>PATH</code> environment variable.</p>
<p><code>Conda</code>/<code>mamba</code> are open-source package and environment management systems that facilitate the installation of multiple software versions and their dependencies. They allow easy switching between environments and are compatible with Linux, macOS, and Windows.</p>
<p><code><a href="reference/cmd_wd.html">cmd_condaenv()</a></code> function accepts multiple <code>conda</code>/<code>mamba</code> environment prefixes and an optional <code>root</code> argument specifying the path to the <code>conda</code>/<code>mamba</code> root prefix. If <code>root</code> is not provided, the function searches for the root in the following order:</p>
<ol style="list-style-type: decimal">
<li>the option: <code>blit.conda.root</code>.</li>
<li>the environment variable: <code>BLIT_CONDA_ROOT</code>.</li>
<li>the root prefix of [<code><a href="reference/appmamba.html">appmamba()</a></code>] (Please see the <code>Software management</code> section for details).</li>
</ol>
<p>The <code><a href="reference/cmd_wd.html">cmd_condaenv()</a></code> function searches for the specified environment prefix within the provided <code>root</code> path.</p>
</div>
<div class="section level3">
<h3 id="software-management">Software management<a class="anchor" aria-label="anchor" href="#software-management"></a>
</h3>
<p>The <code>blit</code> package integrates with <code>micromamba</code>, a lightweight version of the mamba package manager, for efficient software environment management.</p>
<p>You can install <code>micromamba</code> with <code><a href="reference/appmamba.html">install_appmamba()</a></code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/appmamba.html">install_appmamba</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Installing appmamba</span></span>
<span><span class="co">#&gt; Downloading from 'https://micro.mamba.pm/api/micromamba/linux-64/latest'</span></span>
<span><span class="co">#&gt; Install appmamba successfully!</span></span></code></pre></div>
<p>The <code><a href="reference/appmamba.html">appmamba()</a></code> function executes specified <code>micromamba</code> commands. Running it without arguments shows the help document:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/appmamba.html">appmamba</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Running command (2025-04-08 05:58:27):</span></span>
<span><span class="co">#&gt; /home/runner/.local/share/R/blit/apps/appmamba/bin/micromamba --root-prefix</span></span>
<span><span class="co">#&gt; /home/runner/.local/share/R/blit/appmamba --help</span></span></code></pre></div>
<p>To create a new environment named <code>samtools</code> and install <code>samtools</code> from <code>Bioconda</code>, use:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/appmamba.html">appmamba</a></span><span class="op">(</span><span class="st">"create"</span>, <span class="st">"--yes"</span>, <span class="st">"--name samtools"</span>, <span class="st">"bioconda::samtools"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Running command (2025-04-08 05:58:27):</span></span>
<span><span class="co">#&gt; /home/runner/.local/share/R/blit/apps/appmamba/bin/micromamba --root-prefix</span></span>
<span><span class="co">#&gt; /home/runner/.local/share/R/blit/appmamba create --yes --name samtools</span></span>
<span><span class="co">#&gt; bioconda::samtools</span></span></code></pre></div>
<p>Once the environment is created, you can execute commands within it. The following example locates the samtools binary within the specified environment:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/exec.html">exec</a></span><span class="op">(</span><span class="st">"which"</span>, <span class="st">"samtools"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/cmd_wd.html">cmd_condaenv</a></span><span class="op">(</span><span class="st">"samtools"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/cmd_run.html">cmd_run</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Setting environment variables: PATH</span></span>
<span><span class="co">#&gt; Running command (2025-04-08 05:58:39): which samtools</span></span>
<span><span class="co">#&gt; Running scheduled exit task</span></span>
<span><span class="co">#&gt; Command process finished</span></span>
<span><span class="co">#&gt; System command succeed</span></span></code></pre></div>
<p>You may want to clean the created environment-<code>samtools</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/appmamba.html">appmamba</a></span><span class="op">(</span><span class="st">"env"</span>, <span class="st">"remove"</span>, <span class="st">"--yes"</span>, <span class="st">"--name samtools"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Running command (2025-04-08 05:58:39):</span></span>
<span><span class="co">#&gt; /home/runner/.local/share/R/blit/apps/appmamba/bin/micromamba --root-prefix</span></span>
<span><span class="co">#&gt; /home/runner/.local/share/R/blit/appmamba env remove --yes --name samtools</span></span></code></pre></div>
<p>For more details, please see <a href="https://mamba.readthedocs.io/en/latest/user_guide/micromamba.html" class="external-link uri">https://mamba.readthedocs.io/en/latest/user_guide/micromamba.html</a>.</p>
</div>
<div class="section level3">
<h3 id="schedule-expressions">Schedule expressions<a class="anchor" aria-label="anchor" href="#schedule-expressions"></a>
</h3>
<p>Several functions allow you to schedule expressions:</p>
<ul>
<li>
<code>cmd_on_start</code>/<code>cmd_on_exit</code>: define the startup, or exit code of the command.</li>
<li>
<code>cmd_on_succeed</code>/<code>cmd_on_fail</code>: define the code to be run when command succeed or fail.</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.create</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="reference/exec.html">exec</a></span><span class="op">(</span><span class="st">"ping"</span>, <span class="st">"localhost"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/cmd_on_start.html">cmd_on_exit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/cmd_run.html">cmd_run</a></span><span class="op">(</span>timeout <span class="op">=</span> <span class="fl">5</span>, stdout <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span> <span class="co"># terminate it after 5s</span></span>
<span><span class="co">#&gt; Running command (2025-04-08 05:58:40): ping localhost</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; PING localhost (::1) 56 data bytes</span></span>
<span><span class="co">#&gt; 64 bytes from localhost (::1): icmp_seq=1 ttl=64 time=0.016 ms</span></span>
<span><span class="co">#&gt; 64 bytes from localhost (::1): icmp_seq=2 ttl=64 time=0.028 ms</span></span>
<span><span class="co">#&gt; 64 bytes from localhost (::1): icmp_seq=3 ttl=64 time=0.029 ms</span></span>
<span><span class="co">#&gt; 64 bytes from localhost (::1): icmp_seq=4 ttl=64 time=0.030 ms</span></span>
<span><span class="co">#&gt; 64 bytes from localhost (::1): icmp_seq=5 ttl=64 time=0.030 ms</span></span>
<span><span class="co">#&gt; Running scheduled exit task</span></span>
<span><span class="co">#&gt; Command process finished</span></span>
<span><span class="co">#&gt; Warning: System command timed out in 5 secs (status: -9)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<p>We can also register code for succeessful or failure command respectively (Timeout means command fail):</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.create</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="reference/exec.html">exec</a></span><span class="op">(</span><span class="st">"ping"</span>, <span class="st">"localhost"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/cmd_on_start.html">cmd_on_fail</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/cmd_run.html">cmd_run</a></span><span class="op">(</span>timeout <span class="op">=</span> <span class="fl">5</span>, stdout <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span> <span class="co"># terminate it after 5s</span></span>
<span><span class="co">#&gt; Running command (2025-04-08 05:58:45): ping localhost</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; PING localhost (::1) 56 data bytes</span></span>
<span><span class="co">#&gt; 64 bytes from localhost (::1): icmp_seq=1 ttl=64 time=0.017 ms</span></span>
<span><span class="co">#&gt; 64 bytes from localhost (::1): icmp_seq=2 ttl=64 time=0.029 ms</span></span>
<span><span class="co">#&gt; 64 bytes from localhost (::1): icmp_seq=3 ttl=64 time=0.030 ms</span></span>
<span><span class="co">#&gt; 64 bytes from localhost (::1): icmp_seq=4 ttl=64 time=0.035 ms</span></span>
<span><span class="co">#&gt; 64 bytes from localhost (::1): icmp_seq=5 ttl=64 time=0.027 ms</span></span>
<span><span class="co">#&gt; Running the scheduled failed task</span></span>
<span><span class="co">#&gt; Running scheduled exit task</span></span>
<span><span class="co">#&gt; Command process finished</span></span>
<span><span class="co">#&gt; Warning: System command timed out in 5 secs (status: -9)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.create</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="reference/exec.html">exec</a></span><span class="op">(</span><span class="st">"ping"</span>, <span class="st">"localhost"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/cmd_on_start.html">cmd_on_succeed</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/cmd_run.html">cmd_run</a></span><span class="op">(</span>timeout <span class="op">=</span> <span class="fl">5</span>, stdout <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span> <span class="co"># terminate it after 5s</span></span>
<span><span class="co">#&gt; Running command (2025-04-08 05:58:50): ping localhost</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; PING localhost (::1) 56 data bytes</span></span>
<span><span class="co">#&gt; 64 bytes from localhost (::1): icmp_seq=1 ttl=64 time=0.017 ms</span></span>
<span><span class="co">#&gt; 64 bytes from localhost (::1): icmp_seq=2 ttl=64 time=0.029 ms</span></span>
<span><span class="co">#&gt; 64 bytes from localhost (::1): icmp_seq=3 ttl=64 time=0.029 ms</span></span>
<span><span class="co">#&gt; 64 bytes from localhost (::1): icmp_seq=4 ttl=64 time=0.034 ms</span></span>
<span><span class="co">#&gt; 64 bytes from localhost (::1): icmp_seq=5 ttl=64 time=0.029 ms</span></span>
<span><span class="co">#&gt; Running scheduled exit task</span></span>
<span><span class="co">#&gt; Command process finished</span></span>
<span><span class="co">#&gt; Warning: System command timed out in 5 secs (status: -9)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span> <span class="co"># file remain exist as timeout means command failed</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="built-in-commands">Built-in commands<a class="anchor" aria-label="anchor" href="#built-in-commands"></a>
</h3>
<p><code>blit</code> provides several built-in functions for directly executing specific commands., these include: <a href="https://www.htslib.org/" class="external-link">samtools</a>, <a href="https://github.com/cancerit/alleleCount" class="external-link">alleleCounter</a>, <a href="https://www.10xgenomics.com/cn/support/software/cell-ranger/latest" class="external-link">cellranger</a>, <a href="https://github.com/linsalrob/fastq-pair" class="external-link">fastq_pair</a>, <a href="https://broadinstitute.github.io/gistic2/" class="external-link">gistic2</a>, <a href="https://github.com/jenniferlu717/KrakenTools" class="external-link">KrakenTools</a>, <a href="https://github.com/DerrickWood/kraken2/wiki/Manual" class="external-link">kraken2</a>, <a href="https://www.perl.org/" class="external-link">perl</a>, <a href="https://github.com/aertslab/pySCENIC" class="external-link">pySCENIC</a>, <a href="https://www.python.org/" class="external-link">python</a>, <a href="https://bioinf.shenwei.me/seqkit/" class="external-link">seqkit</a>, <a href="https://github.com/liulab-dfci/TRUST4" class="external-link">trust4</a>.</p>
<p>For these commands, you can also use <code><a href="reference/cmd_run.html">cmd_help()</a></code> to print the help document.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/python.html">python</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="reference/cmd_run.html">cmd_help</a></span><span class="op">(</span>stdout <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Running command (2025-04-08 05:58:55): /usr/bin/python --help</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; usage: /usr/bin/python [option] ... [-c cmd | -m mod | file | -] [arg] ...</span></span>
<span><span class="co">#&gt; Options (and corresponding environment variables):</span></span>
<span><span class="co">#&gt; -b     : issue warnings about converting bytes/bytearray to str and comparing</span></span>
<span><span class="co">#&gt;          bytes/bytearray with str or bytes with int. (-bb: issue errors)</span></span>
<span><span class="co">#&gt; -B     : don't write .pyc files on import; also PYTHONDONTWRITEBYTECODE=x</span></span>
<span><span class="co">#&gt; -c cmd : program passed in as string (terminates option list)</span></span>
<span><span class="co">#&gt; -d     : turn on parser debugging output (for experts only, only works on</span></span>
<span><span class="co">#&gt;          debug builds); also PYTHONDEBUG=x</span></span>
<span><span class="co">#&gt; -E     : ignore PYTHON* environment variables (such as PYTHONPATH)</span></span>
<span><span class="co">#&gt; -h     : print this help message and exit (also -? or --help)</span></span>
<span><span class="co">#&gt; -i     : inspect interactively after running script; forces a prompt even</span></span>
<span><span class="co">#&gt;          if stdin does not appear to be a terminal; also PYTHONINSPECT=x</span></span>
<span><span class="co">#&gt; -I     : isolate Python from the user's environment (implies -E and -s)</span></span>
<span><span class="co">#&gt; -m mod : run library module as a script (terminates option list)</span></span>
<span><span class="co">#&gt; -O     : remove assert and __debug__-dependent statements; add .opt-1 before</span></span>
<span><span class="co">#&gt;          .pyc extension; also PYTHONOPTIMIZE=x</span></span>
<span><span class="co">#&gt; -OO    : do -O changes and also discard docstrings; add .opt-2 before</span></span>
<span><span class="co">#&gt;          .pyc extension</span></span>
<span><span class="co">#&gt; -P     : don't prepend a potentially unsafe path to sys.path; also</span></span>
<span><span class="co">#&gt;          PYTHONSAFEPATH</span></span>
<span><span class="co">#&gt; -q     : don't print version and copyright messages on interactive startup</span></span>
<span><span class="co">#&gt; -s     : don't add user site directory to sys.path; also PYTHONNOUSERSITE=x</span></span>
<span><span class="co">#&gt; -S     : don't imply 'import site' on initialization</span></span>
<span><span class="co">#&gt; -u     : force the stdout and stderr streams to be unbuffered;</span></span>
<span><span class="co">#&gt;          this option has no effect on stdin; also PYTHONUNBUFFERED=x</span></span>
<span><span class="co">#&gt; -v     : verbose (trace import statements); also PYTHONVERBOSE=x</span></span>
<span><span class="co">#&gt;          can be supplied multiple times to increase verbosity</span></span>
<span><span class="co">#&gt; -V     : print the Python version number and exit (also --version)</span></span>
<span><span class="co">#&gt;          when given twice, print more information about the build</span></span>
<span><span class="co">#&gt; -W arg : warning control; arg is action:message:category:module:lineno</span></span>
<span><span class="co">#&gt;          also PYTHONWARNINGS=arg</span></span>
<span><span class="co">#&gt; -x     : skip first line of source, allowing use of non-Unix forms of #!cmd</span></span>
<span><span class="co">#&gt; -X opt : set implementation-specific option</span></span>
<span><span class="co">#&gt; --check-hash-based-pycs always|default|never:</span></span>
<span><span class="co">#&gt;          control how Python invalidates hash-based .pyc files</span></span>
<span><span class="co">#&gt; --help-env: print help about Python environment variables and exit</span></span>
<span><span class="co">#&gt; --help-xoptions: print help about implementation-specific -X options and exit</span></span>
<span><span class="co">#&gt; --help-all: print complete help information and exit</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Arguments:</span></span>
<span><span class="co">#&gt; file   : program read from script file</span></span>
<span><span class="co">#&gt; -      : program read from stdin (default; interactive mode if a tty)</span></span>
<span><span class="co">#&gt; arg ...: arguments passed to program in sys.argv[1:]</span></span>
<span><span class="co">#&gt; Running scheduled exit task</span></span>
<span><span class="co">#&gt; Command process finished</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/perl.html">perl</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="reference/cmd_run.html">cmd_help</a></span><span class="op">(</span>stdout <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Running command (2025-04-08 05:58:55): /usr/bin/perl --help</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Usage: /usr/bin/perl [switches] [--] [programfile] [arguments]</span></span>
<span><span class="co">#&gt;   -0[octal/hexadecimal] specify record separator (\0, if no argument)</span></span>
<span><span class="co">#&gt;   -a                    autosplit mode with -n or -p (splits $_ into @F)</span></span>
<span><span class="co">#&gt;   -C[number/list]       enables the listed Unicode features</span></span>
<span><span class="co">#&gt;   -c                    check syntax only (runs BEGIN and CHECK blocks)</span></span>
<span><span class="co">#&gt;   -d[t][:MOD]           run program under debugger or module Devel::MOD</span></span>
<span><span class="co">#&gt;   -D[number/letters]    set debugging flags (argument is a bit mask or alphabets)</span></span>
<span><span class="co">#&gt;   -e commandline        one line of program (several -e's allowed, omit programfile)</span></span>
<span><span class="co">#&gt;   -E commandline        like -e, but enables all optional features</span></span>
<span><span class="co">#&gt;   -f                    don't do $sitelib/sitecustomize.pl at startup</span></span>
<span><span class="co">#&gt;   -F/pattern/           split() pattern for -a switch (//'s are optional)</span></span>
<span><span class="co">#&gt;   -g                    read all input in one go (slurp), rather than line-by-line (alias for -0777)</span></span>
<span><span class="co">#&gt;   -i[extension]         edit &lt;&gt; files in place (makes backup if extension supplied)</span></span>
<span><span class="co">#&gt;   -Idirectory           specify @INC/#include directory (several -I's allowed)</span></span>
<span><span class="co">#&gt;   -l[octnum]            enable line ending processing, specifies line terminator</span></span>
<span><span class="co">#&gt;   -[mM][-]module        execute "use/no module..." before executing program</span></span>
<span><span class="co">#&gt;   -n                    assume "while (&lt;&gt;) { ... }" loop around program</span></span>
<span><span class="co">#&gt;   -p                    assume loop like -n but print line also, like sed</span></span>
<span><span class="co">#&gt;   -s                    enable rudimentary parsing for switches after programfile</span></span>
<span><span class="co">#&gt;   -S                    look for programfile using PATH environment variable</span></span>
<span><span class="co">#&gt;   -t                    enable tainting warnings</span></span>
<span><span class="co">#&gt;   -T                    enable tainting checks</span></span>
<span><span class="co">#&gt;   -u                    dump core after parsing program</span></span>
<span><span class="co">#&gt;   -U                    allow unsafe operations</span></span>
<span><span class="co">#&gt;   -v                    print version, patchlevel and license</span></span>
<span><span class="co">#&gt;   -V[:configvar]        print configuration summary (or a single Config.pm variable)</span></span>
<span><span class="co">#&gt;   -w                    enable many useful warnings</span></span>
<span><span class="co">#&gt;   -W                    enable all warnings</span></span>
<span><span class="co">#&gt;   -x[directory]         ignore text before #!perl line (optionally cd to directory)</span></span>
<span><span class="co">#&gt;   -X                    disable all warnings</span></span>
<span><span class="co">#&gt;   </span></span>
<span><span class="co">#&gt; Run 'perldoc perl' for more help with Perl.</span></span>
<span><span class="co">#&gt; Running scheduled exit task</span></span>
<span><span class="co">#&gt; Command process finished</span></span></code></pre></div>
<p>And it is very easily to extend for other commands.</p>
</div>
<div class="section level3">
<h3 id="pipe">Pipe<a class="anchor" aria-label="anchor" href="#pipe"></a>
</h3>
<p>One of the great features of <code>blit</code> is its ability to translate the R pipe (<code>%&gt;%</code> or <code>|&gt;</code>) into the Linux pipe (<code>|</code>). All functions used to create a <code>command</code> object can accept another <code>command</code> object. The internal will capture the first unnamed input value. If it is a <code>command</code> object, it will be removed from the call and saved. When the <code>command</code> object is run, the saved command will be passed through the pipe (<code>|</code>) to the command. Here we take the <code>gzip</code> command as an example (assuming you’re using a Linux system).</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmpdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>tmpdir <span class="op">=</span> <span class="va">tmpdir</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="va">letters</span>, con <span class="op">=</span> <span class="va">file</span><span class="op">)</span></span>
<span><span class="va">file2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/exec.html">exec</a></span><span class="op">(</span><span class="st">"gzip"</span>, <span class="st">"-c"</span>, <span class="va">file</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/exec.html">exec</a></span><span class="op">(</span><span class="st">"gzip"</span>, <span class="st">"-d"</span>, <span class="st">"&gt;"</span>, <span class="va">file2</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="reference/cmd_run.html">cmd_run</a></span><span class="op">(</span>stdout <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Running command (2025-04-08 05:58:55): gzip -c /tmp/Rtmp2bxDJx/file1db163a56a5d</span></span>
<span><span class="co">#&gt; | gzip -d &gt; /tmp/Rtmp2bxDJx/file1db14f8f6795</span></span>
<span><span class="co">#&gt; Running scheduled exit task</span></span>
<span><span class="co">#&gt; Command process finished</span></span>
<span><span class="co">#&gt; System command succeed</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">file2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>In the last we clean the temporary files.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="va">file2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="development">Development<a class="anchor" aria-label="anchor" href="#development"></a>
</h2>
<p>To add a new command, use the <code>make_command</code> function. This helper function is designed to assist developers in creating functions that initialize new <code>command</code> objects. A <code>command</code> object is a bundle of multiple <code>Command</code> R6 objects (note the uppercase <code>"C"</code> in <code>Command</code>, which distinguishes it from the <code>command</code> object) and the associated running environment (including the working directory and environment variables).</p>
<p>The <code>make_command</code> function accepts a function that initializes a new <code>Command</code> object and, when necessary, validates the input arguments. The core purpose is to create a new <code>Command</code> R6 object, so familiarity with the R6 class system is essential.</p>
<p>There are several private methods or fields you may want to override when creating a new <code>Command</code> R6 object. The first method is <code>command_locate</code>, which determines how to locate the command path. By default, it will attempt to use the <code>cmd</code> argument provided by the user. If no <code>cmd</code> argument is supplied, it will try to locate the command using the <code>alias</code> method. In most cases, you will only need to provide values for the <code>alias</code> method, rather than overriding the <code>command_locate</code> method.</p>
<p>For example, consider the <code>ping</code> command. Here is how you can define it:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Ping</span> <span class="op">&lt;-</span> <span class="fu">R6</span><span class="fu">::</span><span class="kw"><a href="https://r6.r-lib.org/reference/R6Class.html" class="external-link">R6Class</a></span><span class="op">(</span></span>
<span>    <span class="st">"Ping"</span>,</span>
<span>    inherit <span class="op">=</span> <span class="va">Command</span>,</span>
<span>    private <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>alias <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="st">"ping"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">ping</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/make_command.html">make_command</a></span><span class="op">(</span><span class="st">"ping"</span>, <span class="kw">function</span><span class="op">(</span><span class="va">...</span>, <span class="va">ping</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">Ping</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>cmd <span class="op">=</span> <span class="va">ping</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="fu">ping</span><span class="op">(</span><span class="st">"8.8.8.8"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="reference/cmd_run.html">cmd_run</a></span><span class="op">(</span>timeout <span class="op">=</span> <span class="fl">5</span>, stdout <span class="op">=</span> <span class="st">"|"</span><span class="op">)</span> <span class="co"># terminate it after 5s</span></span>
<span><span class="co">#&gt; Running command (2025-04-08 05:58:55): /usr/bin/ping 8.8.8.8</span></span>
<span><span class="co">#&gt; Running scheduled exit task</span></span>
<span><span class="co">#&gt; Command process finished</span></span>
<span><span class="co">#&gt; Warning: System command timed out in 5 secs (status: -9)</span></span></code></pre></div>
<p>For command-line tools, the input parameters should always be characters. The core principle of the <code>Command</code> object is to convert all R objects (such as data frames) into characters—typically file paths of R objects that have been saved to disk.</p>
</div>
<div class="section level2">
<h2 id="session-informations">Session Informations<a class="anchor" aria-label="anchor" href="#session-informations"></a>
</h2>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; R version 4.4.3 (2025-02-28)</span></span>
<span><span class="co">#&gt; Platform: x86_64-pc-linux-gnu</span></span>
<span><span class="co">#&gt; Running under: Ubuntu 24.04.2 LTS</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Matrix products: default</span></span>
<span><span class="co">#&gt; BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 </span></span>
<span><span class="co">#&gt; LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.26.so;  LAPACK version 3.12.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; locale:</span></span>
<span><span class="co">#&gt;  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       </span></span>
<span><span class="co">#&gt;  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   </span></span>
<span><span class="co">#&gt;  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          </span></span>
<span><span class="co">#&gt; [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; time zone: UTC</span></span>
<span><span class="co">#&gt; tzcode source: system (glibc)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attached base packages:</span></span>
<span><span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; other attached packages:</span></span>
<span><span class="co">#&gt; [1] blit_0.2.0.9000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; loaded via a namespace (and not attached):</span></span>
<span><span class="co">#&gt;  [1] digest_0.6.37     R6_2.6.1          fastmap_1.2.0     xfun_0.52        </span></span>
<span><span class="co">#&gt;  [5] knitr_1.50        parallel_4.4.3    htmltools_0.5.8.1 rmarkdown_2.29   </span></span>
<span><span class="co">#&gt;  [9] ps_1.9.0          cli_3.6.4         processx_3.8.6    data.table_1.17.0</span></span>
<span><span class="co">#&gt; [13] compiler_4.4.3    tools_4.4.3       evaluate_1.0.3    yaml_2.3.10      </span></span>
<span><span class="co">#&gt; [17] rlang_1.1.5</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=blit" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/WangLabCSU/blit/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/WangLabCSU/blit/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing blit</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Yun Peng <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-2801-3332" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Shixiang Wang <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-9855-7357" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/WangLabCSU/blit/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/WangLabCSU/blit/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://CRAN.R-project.org/package=blit" class="external-link"><img src="https://www.r-pkg.org/badges/version/blit" alt="CRAN status"></a></li>
<li><a href="https://cran.r-project.org/package=blit" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/blit"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Yun Peng, Shixiang Wang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
